---
layout:     post
title:      补码，原码
subtitle:   以java中int为例
date:       2020-07-17
author:     taoke
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 计算机基础
---

# java int基础

在java中，int是**有符号整数**，占4个字节。总32位，第一位是符号位。int表示的范围为

-2^31 ~ 2^31-1

# 计算机基础

在计算机中所有数字都是用补码表示的

正数的补码是等于原码

负数的补码等于**除符号位外**所有位取反，再+1

# 实例

## 原码转补码（针对负数）

int a = 1;

1的二进制表示为：                       00000000   00000000  00000000  00000001

-1在计算机中以补码形式存储：

* 首先符号位从0变为1,0代表正数，1代码负数
* 其他位取反
* +1

结果是： 11111111  1111111  1111111 11111111

## 补码转原码（针对负数）

步骤完全一样   



所以int的取值范围是：01111111  11111111  11111111  11111111

最大值是2^31-1



负数：10000000  00000000 00000000  00000000

求得原码依然是 10000000   00000000  00000000  00000000即2^31

**注意**，这时候的1不是符号位了

所以int的取值范围是-2^31 ~ 2^31-1



# 有趣的例子

已经知道int的最小值是-2147483648

如下程序

Math.abs(-2147483648)的结果依然是-2147483648。

Math.abs的源码：

```java
public static long abs(int a) {
    return (a < 0) ? -a : a;
}
```

由a变为-a会走上面的步骤，int下-2147483648取反+1的结果是10000000  00000000 00000000  00000000，但由于是int，计算机把他是被为-2147483648



而如果我们将代码改为

Math.abs(-2147483648l)

结果就是正数了2147483648，我们显式的加上“l”，调用的是Math.abs(long),虽然取反+1的结果是一样的，但是在long的条件下，第一位1不是符号位，而是数值为，所谓是正数。